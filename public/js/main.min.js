function applyUserPreference(e,t,n){const s=localStorage.getItem(e);if(s){const e=n||document.body;e.classList.add(`${s}-mode`)}}window.addEventListener("hashchange",function(){let t=parseFloat(getComputedStyle(document.documentElement).fontSize),n=8,s=n*t,e=document.getElementById(location.hash.substring(1));if(e){let t=e.getBoundingClientRect();window.scrollTo(0,t.top+window.pageYOffset-s)}},!1),document.addEventListener("DOMContentLoaded",function(){let n=document.querySelectorAll(".author"),e=document.querySelector(".author-details");n.forEach(t=>{t.addEventListener("click",function(){let n=this.dataset.affiliation,t=this.dataset.email;(e.innerHTML==`${n}<br><a href="mailto:${t}">${t}</a>`||!e.classList.contains("show"))&&e.classList.toggle("show"),e.innerHTML!=`${n}<br><a href="mailto:${t}">${t}</a>`&&e.classList.contains("show")&&(e.innerHTML=`${n}<br><a href="mailto:${t}">${t}</a>`)}),t.addEventListener("mouseover",function(){let n=this.dataset.affiliation,t=this.dataset.email;e.innerHTML!=`${n}<br><a href="mailto:${t}">${t}</a>`&&e.classList.contains("show")&&(e.innerHTML=`${n}<br><a href="mailto:${t}">${t}</a>`)})}),document.getElementById("darkToggle").addEventListener("click",function(){document.body.classList.toggle("dark-mode"),document.body.classList.contains("dark-mode")?localStorage.setItem("theme","dark"):localStorage.removeItem("theme")}),document.getElementById("toggleColumns").addEventListener("click",function(){const e=document.querySelector(".content");e.classList.toggle("two-columns"),e.classList.contains("two-columns")?localStorage.setItem("column","double"):localStorage.removeItem("column")}),document.getElementById("arialToggle").addEventListener("click",function(){document.body.style.fontFamily="Arial",localStorage.setItem("fontPreference","Arial")}),document.getElementById("garToggle").addEventListener("click",function(){document.body.style.fontFamily="Garamond",localStorage.setItem("fontPreference","Garamond")}),document.getElementById("dysToggle").addEventListener("click",function(){document.body.style.fontFamily="OpenDyslexic",localStorage.setItem("fontPreference","OpenDyslexic")}),applyUserPreference("theme","dark-mode"),applyUserPreference("column","two-columns",document.querySelector(".content"));let t=localStorage.getItem("fontPreference");t&&(document.body.style.fontFamily=t),window.addEventListener("beforeprint",()=>{applyUserPreference("theme","dark-mode"),applyUserPreference("column","two-columns",document.querySelector(".content"));let e=localStorage.getItem("fontPreference");e&&(document.body.style.fontFamily=e)})})